<div class="flex flex-col justify-center items-center h-full">
  <div class="w-full max-w-5xl mx-auto">
    <h2 class="text-3xl pb-10 text-white"><i class="pi pi-cog"></i> Rooms Settings</h2>
  </div>
  <div class="card w-full max-w-5xl">
    <p-table
        [value]="rooms"
        [paginator]="true"
        [responsive]="true"
        [responsiveLayout]="'scroll'"
        scrollable="true"
        [rows]="5"
        [tableStyle]="{ 'min-width': '60rem' }"
        [editMode]="'row'"
        [scrollHeight]="'550px'"
    >
        <ng-template #header>
            <tr>
                <th style="width:15%">Image</th>
                <th style="width:15%">Room</th>
                <th style="width:15%">Type</th>
                <th style="width:40%">Features</th>
                <th style="width:15%">Price</th>
                <th style="width:50%" colspan="2">
                  <button (click)="showAddDialog()" pButton pRipple type="button" class=" rounded-md p-button-success w-24 h-8 flex justify-center items-center"><i class="pi pi-plus me-2"></i> Add</button>
                </th>
            </tr>
        </ng-template>
        <ng-template #body let-rooms>
            <tr>
                <td><img class="w-20 h-full" [src]="rooms.image" alt="room image"></td>
                <td>{{ rooms.name }}</td>
                <td>{{ rooms.type }}</td>
                <td>{{ rooms.description }}</td>
                <td>{{ rooms.price }}</td>
                <td>
                    <button (click)="showUpdateDialog(rooms.id)" pButton pRipple type="button" class="p-button-rounded p-button-secondary mr-2 w-8 h-8 flex justify-center items-center">
                        <i class="pi pi-pencil text-black"></i>
                    </button>
                </td>
                <td>
                    <button (click)="deleteRoom(rooms.id)" pButton pRipple type="button" class="p-button-rounded p-button-danger w-8 h-8 flex justify-center items-center">
                        <i class="pi pi-trash"></i>
                    </button>
                </td>
            </tr>
        </ng-template>
    </p-table>
  </div>
</div>

<p-confirmdialog />

<p-dialog [header]="isUpdate ? 'Update Room' : 'Add New Room'" [modal]="true" [(visible)]="visible" [style]="{ width: '30rem' }">
  <form method="post" [formGroup]="roomForm" action="post" (ngSubmit)="isUpdate ? updateRoom(roomForm) : addRoom(roomForm)">
    <span class="p-text-secondary block mb-8">{{isUpdate ? 'Update your informations' : 'Add your informations'}}</span>
  <div class="flex items-center gap-4 mb-8">
      <label for="name" class="font-semibold w-32">Room number</label>
      <input formControlName="name" pInputText placeholder="Enter room number" name="name" id="name" class="flex-auto" autocomplete="off" />
  </div>
  <div class="flex items-center gap-4 mb-8">
      <label for="type" class="font-semibold w-32">Room type</label>
      <input formControlName="type" pInputText placeholder="Enter room type" name="type" id="type" class="flex-auto" autocomplete="off" />
  </div>
  <div class="flex items-center gap-4 mb-8">
    <label for="description" class="font-semibold w-32">Description</label>
    <input formControlName="description" pInputText placeholder="Enter description" name="description" id="description" class="flex-auto" autocomplete="off" />
</div>
<div class="flex items-center gap-4 mb-8">
  <label for="image" class="font-semibold w-32">Image</label>
  <input formControlName="image" pInputText placeholder="Enter image url" name="image" id="image" class="flex-auto" autocomplete="off" />
</div>
<div class="flex items-center gap-4 mb-8">
  <label for="email" class="font-semibold w-32">Price</label>
  <input formControlName="price" pInputText placeholder="Enter price" name="price" id="price" class="flex-auto" autocomplete="off" />
</div>
  <div class="flex justify-end gap-2">
      <p-button label="Cancel" severity="danger" (click)="visible = false" />
      <p-button [disabled]="roomForm.invalid" type="submit" [label]="isUpdate ? 'Update' : 'Add'" severity="success"  />
  </div>
  </form>
</p-dialog>
